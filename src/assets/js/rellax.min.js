(function(h,g){"function"===typeof define&&define.amd?define([],g):"object"===typeof module&&module.exports?module.exports=g():h.Rellax=g()})(this,function(){var h=function(g,m){var b=Object.create(h.prototype),k=0,p=0,q=0,e=[],t=!1,y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(b){setTimeout(b,1E3/60)},z=window.transformProp||function(){var b=document.createElement("div");
if(null===b.style.transform){var a=["Webkit","Moz","ms"],d;for(d in a)if(void 0!==b.style[a[d]+"Transform"])return a[d]+"Transform"}return"transform"}();b.options={speed:-2,center:!1,wrapper:null,round:!0,vertical:!0,horizontal:!1,callback:function(){}};m&&Object.keys(m).forEach(function(c){b.options[c]=m[c]});g||(g=".rellax");var l="string"===typeof g?document.querySelectorAll(g):[g];if(0<l.length)b.elems=l;else throw Error("The elements you're trying to select don't exist.");if(b.options.wrapper&&
!b.options.wrapper.nodeType)if(l=document.querySelector(b.options.wrapper))b.options.wrapper=l;else throw Error("The wrapper you're trying to use don't exist.");var n=function(){for(var c=0;c<e.length;c++)b.elems[c].style.cssText=e[c].style;e=[];p=window.innerHeight;q=window.innerWidth;u();for(c=0;c<b.elems.length;c++){var a=b.elems[c],d=a.getAttribute("data-rellax-percentage"),r=a.getAttribute("data-rellax-speed"),g=a.getAttribute("data-rellax-zindex")||0,h=b.options.wrapper?b.options.wrapper.scrollTop:
window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,f=b.options.vertical?d||b.options.center?h:0:0,k=b.options.horizontal?d||b.options.center?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0:0;h=f+a.getBoundingClientRect().top;var l=a.clientHeight||a.offsetHeight||a.scrollHeight,m=k+a.getBoundingClientRect().left,n=a.clientWidth||a.offsetWidth||a.scrollWidth;f=d?d:(f-h+p)/(l+p);d=d?d:(k-m+q)/(n+q);b.options.center&&(f=d=.5);r=r?r:b.options.speed;
d=v(d,f,r);a=a.style.cssText;f="";0<=a.indexOf("transform")&&(f=a.indexOf("transform"),f=a.slice(f),f=(k=f.indexOf(";"))?" "+f.slice(11,k).replace(/\s/g,""):" "+f.slice(11).replace(/\s/g,""));e.push({baseX:d.x,baseY:d.y,top:h,left:m,height:l,width:n,speed:r,style:a,transform:f,zindex:g})}w()},u=function(){var c=k;k=b.options.wrapper?b.options.wrapper.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset;return c!=k&&b.options.vertical?!0:!1},v=
function(c,a,d){var e={};c=100*d*(1-c);a=100*d*(1-a);e.x=b.options.round?Math.round(c):Math.round(100*c)/100;e.y=b.options.round?Math.round(a):Math.round(100*a)/100;return e},x=function(){u()&&!1===t&&w();y(x)},w=function(){for(var c,a=0;a<b.elems.length;a++){c=v((0-e[a].left+q)/(e[a].width+q),(k-e[a].top+p)/(e[a].height+p),e[a].speed);var d=c.y-e[a].baseY,g=c.x-e[a].baseX;b.elems[a].style[z]="translate3d("+(b.options.horizontal?g:"0")+"px,"+(b.options.vertical?d:"0")+"px,"+e[a].zindex+"px) "+e[a].transform}b.options.callback(c)};
b.destroy=function(){for(var c=0;c<b.elems.length;c++)b.elems[c].style.cssText=e[c].style;t=!0};n();window.addEventListener("resize",function(){n()});x();b.refresh=n;return b};return h});
